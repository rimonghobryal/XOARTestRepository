args:
- default: true
  description: Entry ID of the last task.
  name: humanReadableEntryId
  required: true
- description: The substring to look for.
  name: substring
  required: true
comment: Verify given entry contains a string
commonfields:
  id: VerifyHumanReadableContains
  version: -1
contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: 5.0.0
    itemVersion: 1.3.15
    packID: DeveloperTools
    packName: Developer Tools
    packPropagationLabels:
    - all
    prevname: ""
    propagationLabels: []
    toServerVersion: ""
enabled: true
engineinfo: {}
mainengineinfo: {}
name: VerifyHumanReadableContains
pswd: ""
runas: DBotWeakRole
runonce: false
script: |
  // pack version: 1.3.15
  var entryRes = executeCommand('getEntry', {'id': args.humanReadableEntryId});
  if (entryRes && Array.isArray(entryRes)) {
      if (entryRes[0].Type !== entryTypes.error) {
          var outputString = entryRes[0].Contents;
      }
  } else {
      throw 'Unexpected entry result: {0}'.format(entryRes);
  }

  if (outputString.indexOf(args.substring) == -1) {
      throw 'Output string does not contain the expected substring.\n\nOutput string:\n{0}\nSubstring:\n{1}'.format(outputString, args.substring);
  }

  log('Output string contains the given substring: {0}'.format(args.substring));
scripttarget: 0
system: true
tags: []
type: javascript
